
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome to sitk-ibex’s documentation! &#8212; sitk-ibex 0.3.dev19 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command Line Interface" href="commandline.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="commandline.html" title="Command Line Interface"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">sitk-ibex 0.3.dev19 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to sitk-ibex’s documentation!</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-sitk-ibex-s-documentation">
<h1>Welcome to sitk-ibex’s documentation!<a class="headerlink" href="#welcome-to-sitk-ibex-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="sitk-ibex-aligning-images-acquired-with-the-ibex-microscopy-imaging-technique">
<h2>SITK-IBEX: Aligning images acquired with the IBEX microscopy imaging technique<a class="headerlink" href="#sitk-ibex-aligning-images-acquired-with-the-ibex-microscopy-imaging-technique" title="Permalink to this headline">¶</a></h2>
<p>This Python package was implemented as part of the development of the
Iterative Bleaching Extends Multiplexity (IBEX) imaging technique. It enables
the alignment of multiple cycles of fluorescence images, acquired
using IBEX. A repeated marker is used to register all panels to a
selected panel (in the registration nomenclature this is the fixed image).
After registration all panels are resampled onto the fixed image.</p>
<p>While this method was developed for a specific imaging protocol, it will likely
work for other sequential protocols that contain a repeated marker.
The registration approach is implemented using the
<a class="reference external" href="https://simpleitk.org">SimpleITK toolkit</a> registration framework.</p>
<p>The key implementation aspects include:</p>
<ol class="arabic simple">
<li><p>Multi-phase based approach with robust initialization.</p></li>
<li><p>Multi-resolution and point sampling.</p></li>
<li><p>Affine transformation model.</p></li>
<li><p>Use of correlation as optimized similarity metric.</p></li>
</ol>
<div class="section" id="build-status">
<h3>Build Status<a class="headerlink" href="#build-status" title="Permalink to this headline">¶</a></h3>
<a class="reference external image-reference" href="https://github.com/niaid/sitk-ibex/actions?query=branch%3A+master+"><img alt="Master Build Status" src="https://github.com/niaid/sitk-ibex/workflows/Python%20Test%20and%20Package/badge.svg?branch=master&amp;event=push" /></a>
<div class="section" id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>The Python module is distributed as a <a class="reference external" href="https://www.python.org/dev/peps/pep-0427/">wheel</a> binary package. Download the latest tagged release from the
<a class="reference external" href="https://github.com/niaid/sitk-ibex/releases">Github Releases</a> page. Then install:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">sitkibex</span><span class="o">-</span><span class="mf">0.1</span><span class="o">-</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span>
</pre></div>
</div>
<p>Wheels from the master branch can be download wheel from <a class="reference external" href="https://github.com/niaid/sitk-ibex/actions?query=branch%3Amaster">Github Actions</a> in the
“python-package” artifact.</p>
<p>Dependencies are conventionally specified in <cite>setup.py</cite> and <cite>requirements.txt</cite> and therefore installed as
dependencies when the wheel is installed. This includes the SimpleITK 2.0 requirement.</p>
</div>
<div class="section" id="data">
<h4>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h4>
<p>Sample data is available on zenodo/figshare - link to this.
?Specify links to the sample IBEX data from the manuscript.?</p>
<p>Any image and transform file format supported by <a class="reference external" href="https://simpleitk.readthedocs.io/en/master/IO.html">SimpleITK’s IO</a>
can be use by sitk-ibex. The 3D <cite>nrrd</cite> format, and <cite>txt</cite> transform file extension are recommended.</p>
<p>The sample data are in the <a class="reference external" href="https://docs.openmicroscopy.org/ome-model/latest/ome-tiff/">OME TIFF</a> format. An individual channel can be saved as <cite>nrrd</cite> with <a class="reference external" href="https://fiji.sc">Fiji</a> by using
“Image-&gt;Color-&gt;Split Channels” followed by “Save As-&gt;Nrrd”.</p>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>The following examples uses CD4 marker channel extracted from the “IBEX4_spleen” data set with ImageJ. The panel 2 is
used as the reference coordinates or the “fixed image”. The other panels are registered then resampled to the fixed
image. The following uses the sitk-ibex command line interface to perform image registration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">sitkibex</span> <span class="n">registration</span> <span class="o">--</span><span class="n">affine</span> <span class="n">IBEX4B_Panel2_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">IBEX4B_Panel1_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">tx_p2_to_p1</span><span class="o">.</span><span class="n">txt</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">sitkibex</span> <span class="n">registration</span> <span class="o">--</span><span class="n">affine</span> <span class="n">IBEX4B_Panel2_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">IBEX4B_Panel3_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">tx_p2_to_p3</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>A quick 2D visualization of the results can be generated with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">sitkibex</span> <span class="n">resample</span> <span class="n">IBEX4B_Panel2_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">IBEX4B_Panel1_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">tx_p2_to_p1</span><span class="o">.</span><span class="n">txt</span> \
       <span class="o">--</span><span class="nb">bin</span> <span class="mi">4</span> <span class="o">--</span><span class="n">fusion</span> <span class="o">--</span><span class="n">projection</span> <span class="o">-</span><span class="n">o</span> <span class="n">IBEX4B_onto_p2_2d_Panel1_CD4_AF594</span><span class="o">.</span><span class="n">png</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">sitkibex</span> <span class="n">resample</span> <span class="n">IBEX4B_Panel3_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">IBEX4B_Panel1_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">tx_p3_to_p1</span><span class="o">.</span><span class="n">txt</span> \
       <span class="o">--</span><span class="nb">bin</span> <span class="mi">4</span> <span class="o">--</span><span class="n">fusion</span> <span class="o">--</span><span class="n">projection</span> <span class="o">-</span><span class="n">o</span> <span class="n">IBEX4B_onto_p2_2d_Panel3_CD4_AF594</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
<p>Then apply the registration transform by resampling the input images onto panel 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">sitkibex</span> <span class="n">resample</span> <span class="n">IBEX4B_Panel2_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">IBEX4B_Panel1_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">tx_p2_to_p1</span><span class="o">.</span><span class="n">txt</span> \
       <span class="o">-</span><span class="n">o</span> <span class="n">IBEX4B_onto_p2_Panel1_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">sitkibex</span> <span class="n">resample</span> <span class="n">IBEX4B_Panel3_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">IBEX4B_Panel1_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span> <span class="n">tx_p3_to_p1</span><span class="o">.</span><span class="n">txt</span> \
       <span class="o">-</span><span class="n">o</span> <span class="n">IBEX4B_onto_p2_Panel3_CD4_AF594</span><span class="o">.</span><span class="n">nrrd</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-cite">
<h4>How to Cite<a class="headerlink" href="#how-to-cite" title="Permalink to this headline">¶</a></h4>
<p>If you use the SITK-IBEX package in your work, please cite us:</p>
<blockquote>
<div><p>A. J. Radtke, E. F. Kandov, B. C. Lowekamp, E. Speranza, C. Chu,
A. Gola, N. Thakur, R. Shih, L. Yao, Z. R. Yaniv, R. Beuschel,
J. Kabat, J. Croteau, J. Davis, J. M. Hernandez, R. N. Germain
“IBEX - A versatile multi-plex optical imaging approach
for deep phenotyping and spatial analysis of cells in complex tissues”,
Proc Natl Acad Sci, in press.</p>
</div></blockquote>
</div>
<div class="section" id="documentation">
<h4>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h4>
<p>The published Sphinx documentation is available here: <a class="reference external" href="https://niaid.github.io/sitk-ibex/">https://niaid.github.io/sitk-ibex/</a></p>
<p>The master built Sphinx documentation is available for download from
<a class="reference external" href="https://github.com/niaid/sitk-ibex/actions?query=branch%3Amaster">Github Actions</a> under the build as “sphinx-docs”.</p>
</div>
<div class="section" id="contact">
<h4>Contact<a class="headerlink" href="#contact" title="Permalink to this headline">¶</a></h4>
<p>Please use the <a class="reference external" href="https://github.com/niaid/sitk-ibex">GitHub Issues</a> for support and code issues related to the sitk-ibex project.</p>
<p>Additionally, we can be emailed at: <a class="reference external" href="mailto:bioinformatics&#37;&#52;&#48;niaid&#46;nih&#46;gov">bioinformatics<span>&#64;</span>niaid<span>&#46;</span>nih<span>&#46;</span>gov</a> Please include “sitk-ibex” in the subject line.</p>
</div>
<div class="section" id="command-line-interface-reference">
<h4>Command Line Interface Reference<a class="headerlink" href="#command-line-interface-reference" title="Permalink to this headline">¶</a></h4>
<p>Documentation for command line usage of the Python module.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="commandline.html">Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="commandline.html#sitkibex">sitkibex</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="api-reference">
<h4>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h4>
<p>Documentation for directly using the Python functions.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>
</div>
</div>
<div class="section" id="development">
<h4>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h4>
<p>The required packages for development are specified in <cite>requirements-dev.txt</cite>. The sitk-ibex project must be install for
it to function properly. Specifically, because semantic versioning is done with <cite>setuptools-scm</cite> it must be installed. To setup for development:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">-</span><span class="n">dev</span><span class="o">.</span><span class="n">txt</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">editable</span> <span class="o">.</span>
</pre></div>
</div>
<p>New contributions must come from pull requests on GitHub. New features should start as local branch with a name
starting with “feature-” followed by a description. After changes, verify flake8 and the tests pass
without warnings or errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">flake8</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Since the repository is internal, the feature branch needs to be
pushed to the <em>upstream</em> repository. Next a pull request is made against master, where the CI will automatically run
flake8, pytest and sphinx. When merging the branch with rebased onto the origin, and the feature branch is deleted.</p>
</div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to sitk-ibex’s documentation!</a><ul>
<li><a class="reference internal" href="#sitk-ibex-aligning-images-acquired-with-the-ibex-microscopy-imaging-technique">SITK-IBEX: Aligning images acquired with the IBEX microscopy imaging technique</a><ul>
<li><a class="reference internal" href="#build-status">Build Status</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#data">Data</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#how-to-cite">How to Cite</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#contact">Contact</a></li>
<li><a class="reference internal" href="#command-line-interface-reference">Command Line Interface Reference</a></li>
<li><a class="reference internal" href="#api-reference">API Reference</a></li>
<li><a class="reference internal" href="#development">Development</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="commandline.html"
                        title="next chapter">Command Line Interface</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="commandline.html" title="Command Line Interface"
             >next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">sitk-ibex 0.3.dev19 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to sitk-ibex’s documentation!</a></li> 
      </ul>
    </div>
        <!-- cutom footer here -->

  </body>
</html>